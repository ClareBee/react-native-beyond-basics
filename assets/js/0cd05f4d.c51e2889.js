"use strict";(self.webpackChunkreact_native_beyond_basics=self.webpackChunkreact_native_beyond_basics||[]).push([[2291],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=m(n),u=o,f=p["".concat(l,".").concat(u)]||p[u]||c[u]||i;return n?a.createElement(f,r(r({ref:t},d),{},{components:n})):a.createElement(f,r({ref:t},d))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var m=2;m<i;m++)r[m]=n[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},3919:function(e,t,n){function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!a(e)}n.d(t,{b:function(){return a},Z:function(){return o}})},4996:function(e,t,n){n.d(t,{C:function(){return i},Z:function(){return r}});var a=n(2263),o=n(3919);function i(){var e=(0,a.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,a){var i=void 0===a?{}:a,r=i.forcePrependBaseUrl,s=void 0!==r&&r,l=i.absolute,m=void 0!==l&&l;if(!n)return n;if(n.startsWith("#"))return n;if((0,o.b)(n))return n;if(s)return t+n;var d=n.startsWith(t)?n:t+n.replace(/^\//,"");return m?e+d:d}(i,n,e,t)}}}function r(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},9491:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return m},toc:function(){return d},default:function(){return p}});var a=n(7462),o=n(3366),i=(n(7294),n(3905)),r=n(4996),s={sidebar_position:1},l="Layout Animation",m={unversionedId:"animation/layout-animation",id:"animation/layout-animation",isDocsHomePage:!1,title:"Layout Animation",description:"There are two ways to animate your UI in React Native: you can either define the exact animation yourself, or you can let LayoutAnimation do all the work for you.",source:"@site/docs/animation/layout-animation.mdx",sourceDirName:"animation",slug:"/animation/layout-animation",permalink:"/react-native-beyond-basics/docs/animation/layout-animation",editUrl:"https://github.com/kadikraman/react-native-beyond-basics/edit/main/website/docs/animation/layout-animation.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Solution",permalink:"/react-native-beyond-basics/docs/custom-fonts/solution"},next:{title:"Reanimated 2",permalink:"/react-native-beyond-basics/docs/animation/reanimated-2"}},d=[{value:"Add delete mood functionality",id:"add-delete-mood-functionality",children:[]},{value:"Animate the list when an item gets removed",id:"animate-the-list-when-an-item-gets-removed",children:[]}],c={toc:d};function p(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"layout-animation"},"Layout Animation"),(0,i.kt)("p",null,"There are two ways to animate your UI in React Native: you can either define the exact animation yourself, or you can let ",(0,i.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/layoutanimation"},"LayoutAnimation")," do all the work for you."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/layoutanimation"},"LayoutAnimation")," is incredibly powerful, although not very flexible. It works by somewhat magically animation the ",(0,i.kt)("em",{parentName:"p"},"next")," UI update from after it's triggered, using the given animation configuration. The downside is that other than configuring the speed of the animation, you'll have no control over it. You can't choose to animate just part of the screen. So in most cases you'll end up building your own custom animations without LayoutAnimation. It's a whole lot better than no animation at all though, so it can be nice to use that instead of a fine grained animation as a first pass."),(0,i.kt)("h2",{id:"add-delete-mood-functionality"},"Add delete mood functionality"),(0,i.kt)("p",null,"First open ",(0,i.kt)("inlineCode",{parentName:"p"},"App.provider.tsx")," and expose a function that lets you delete a given mood:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/App.provider.tsx"',title:'"src/App.provider.tsx"'},"const handleDeleteMood = React.useCallback((mood: MoodOptionWithTimestamp) => {\n  setMoodList((current) => {\n    const newValue = current.filter(\n      (item) => item.timestamp !== mood.timestamp\n    );\n    setAppData({ moods: newValue });\n    return newValue;\n  });\n}, []);\n")),(0,i.kt)("p",null,"Now in ",(0,i.kt)("inlineCode",{parentName:"p"},"MoodItemRow"),', add a "delete" button that calls this function via context:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/MoodItemRow.tsx"',title:'"src/components/MoodItemRow.tsx"'},"import { Pressable } from 'react-native';\nimport { useAppContext } from '../App.provider';\n\nconst appContext = useAppContext();\n\n---\n\n<Pressable hitSlop={16} onPress={() => appContext.handleDeleteMood(item)}>\n  <Text style={styles.deleteText}>Delete</Text>\n</Pressable>;\n\n---\n\ndeleteText: {\n  color: theme.colorBlue,\n  fontFamily: theme.fontFamilyLight,\n},\n")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Checkpoint \ud83d\udd17")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("a",{parentName:"p",href:"https://github.com/kadikraman/MoodTracker/commit/446690b59eb6281638e1b589140bc1700a9a9ebb"},(0,i.kt)("strong",{parentName:"a"},"Enable deleting past moods")," 446690b59eb6281638e1b589140bc1700a9a9ebb")))),(0,i.kt)("h2",{id:"animate-the-list-when-an-item-gets-removed"},"Animate the list when an item gets removed"),(0,i.kt)("p",null,"LayoutAnimation is enabled by default on iOS, but it's still experimental on Android. In order to enable LayoutAnimation on Android, open ",(0,i.kt)("inlineCode",{parentName:"p"},"App.tsx")," and add the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'},"import { Platform, UIManager } from 'react-native';\n\nif (Platform.OS === 'android') {\n  if (UIManager.setLayoutAnimationEnabledExperimental) {\n    UIManager.setLayoutAnimationEnabledExperimental(true);\n  }\n}\n")),(0,i.kt)("p",null,"Now to animate the list, open ",(0,i.kt)("inlineCode",{parentName:"p"},"MoodItemRow")," and"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"pull the onPress function out to a callback"),(0,i.kt)("li",{parentName:"ol"},"call ",(0,i.kt)("inlineCode",{parentName:"li"},"LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);")," before the delete function")),(0,i.kt)("p",null,"Note - it actually doesn't matter whether you put the ",(0,i.kt)("inlineCode",{parentName:"p"},"LayoutAnimation.configureNext")," call before or after the ",(0,i.kt)("inlineCode",{parentName:"p"},"handleDeleteMood")," call. It will always apply to the next UI update."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/MoodItemRow.tsx"',title:'"src/components/MoodItemRow.tsx"'},"const handlePress = React.useCallback(() => {\n  LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n  appContext.handleDeleteMood(item);\n}, [appContext, item]);\n")),(0,i.kt)("p",null,"Finally you might have noticed that when adding new mood items, new rows get added to the bottom of our list, not the top. In this case it would make more sense for the new entries to be added to the top instead. Thankfully we can easily fix this:"),(0,i.kt)("p",null,"Open ",(0,i.kt)("inlineCode",{parentName:"p"},"History.screen")," and call ",(0,i.kt)("inlineCode",{parentName:"p"},"slice().reverse()")," on the mood list before mapping over it:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-diff",metastring:'title="src/screens/History.screen.tsx"',title:'"src/screens/History.screen.tsx"'},"-      {appContext.moodList.map(item => (\n+      {appContext.moodList.slice().reverse().map(item => (\n")),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Remember ",(0,i.kt)("inlineCode",{parentName:"p"},"reverse()")," alone mutates the original array which can cause unintended consequences."),(0,i.kt)("p",{parentName:"div"},"This is why we call ",(0,i.kt)("inlineCode",{parentName:"p"},"slice()")," on the array first to create a copy of it."))),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Checkpoint \ud83d\udd17")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("a",{parentName:"p",href:"https://github.com/kadikraman/MoodTracker/commit/577d2cd0d9d156488e4eb37f886f563403484d86"},(0,i.kt)("strong",{parentName:"a"},"Use LayoutAnimation to animate removing item from list")," 577d2cd0d9d156488e4eb37f886f563403484d86")))),(0,i.kt)("div",null,(0,i.kt)("video",{width:"100%",controls:!0},(0,i.kt)("source",{src:(0,r.Z)("/img/animation/delete-animation.mp4"),type:"video/mp4"}))))}p.isMDXComponent=!0}}]);